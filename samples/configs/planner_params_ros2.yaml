# ROS2 Local Planner Parameters
# For use with Nav2 and nav2_core::Controller

controller_server:
  ros__parameters:
    use_sim_time: true
    controller_frequency: 10.0
    min_x_velocity_threshold: 0.001
    min_y_velocity_threshold: 0.001
    min_theta_velocity_threshold: 0.001
    failure_tolerance: 0.3
    progress_checker_plugin: "progress_checker"
    goal_checker_plugins: ["general_goal_checker"]
    controller_plugins: ["FollowPath"]

    # Progress checker
    progress_checker:
      plugin: "nav2_controller::SimpleProgressChecker"
      required_movement_radius: 0.5
      movement_time_allowance: 10.0

    # Goal checker
    general_goal_checker:
      stateful: true
      plugin: "nav2_controller::SimpleGoalChecker"
      xy_goal_tolerance: 0.1
      yaw_goal_tolerance: 0.1

    # GA-based local planner
    FollowPath:
      plugin: "plan_ga_ros2::PlanGAROS2Plugin"

      # Model Configuration
      model_path: "/models/planner_policy.onnx"

      # Planning Parameters
      num_control_steps: 20
      control_frequency: 10.0  # Hz
      time_horizon: 2.0        # seconds

      # Velocity Limits
      # Customize these for your robot!
      max_v_x: 1.0     # m/s (forward)
      min_v_x: -0.5    # m/s (backward)
      max_v_y: 0.5     # m/s (left, set to 0.0 for differential drive)
      min_v_y: -0.5    # m/s (right, set to 0.0 for differential drive)
      max_omega: 1.0   # rad/s (counter-clockwise)
      min_omega: -1.0  # rad/s (clockwise)

      # Costmap Parameters
      costmap_window_size: 50  # pixels (50x50 grid)

      # Safety Parameters
      lethal_cost_threshold: 253      # Costs >= this are lethal
      enable_collision_check: true    # Post-planning collision validation

      # Trajectory Publishing
      publish_local_plan: true

      # Debugging
      debug_mode: false         # Enable verbose logging
      publish_cost_cloud: false # Publish costmap as point cloud
